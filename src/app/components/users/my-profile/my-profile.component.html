<div class="myprofile">
    <figure>
        <img src="../../../../assets/images/perfil.jpg" alt="" class="img-fluid">
    </figure>
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-md-10">
                <h1 class="textBlack my-5">Mis datos personales</h1>
                <form [formGroup]="formulario" *ngIf="formulario" (ngSubmit)="onSubmit()">
                    <div class="row">
                        <div class="col-md-6 my-3">
                            <label class="form-label">Nombre <span class="req">*</span></label>
                            <input type="text" class="form-control" formControlName="name" [attr.disabled]="bloqueo ? 'disabled': null">
                            <p class="error" *ngIf="checkError('name', 'required')">Este campo es requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Apellidos <span class="req">*</span></label>
                            <input type="text" class="form-control" formControlName="surname" [attr.disabled]="bloqueo ? 'disabled': null">
                            <p class="error" *ngIf="checkError('surname', 'required')">Este campo es requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Usuario <span class="req">*</span></label>
                            <input type="text" class="form-control" formControlName="username" [attr.disabled]="bloqueo ? 'disabled': null">
                            <p class="error" *ngIf="checkError('username', 'required')"> Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Contraseña <span class="req">*</span></label>
                            <input type="password" class="form-control" formControlName="password" [attr.disabled]="true">
                            <p class="error" *ngIf="checkError('password', 'required')">Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Teléfono <span class="req">*</span></label>
                            <input type="text" class="form-control" formControlName="phone" [attr.disabled]="bloqueo ? 'disabled': null">
                            <p class="error" *ngIf="checkError('phone', 'required')">Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Email <span class="req">*</span></label>
                            <input type="text" class="form-control" formControlName="email" [attr.disabled]="true">
                            <p class="error" *ngIf="checkError('email', 'required')">Campo requerido <span>*</span></p>
                            <p class="error" *ngIf="checkError('email', 'pattern')">Debe tener un formato correcto <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label">Fecha de nacimiento <span class="req">*</span></label>
                            <input type="date" class="form-control" formControlName="birth_date" [attr.disabled]="bloqueo ? 'disabled': null">
                            <p class="error" *ngIf="checkError('birth_date', 'required')">Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-6 my-3">
                            <label class="form-label"> Foto de perfil</label>
                            <input type="file" class="form-control" formControlName="photo" [attr.disabled]="bloqueo ? 'disabled': null" name="img_user" (change)="onChange($event)">
                            <p class="error" *ngIf="checkError('photo', 'required')">Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-12 my-3">
                            <label class="form-label">Aficiones <span class="req">*</span></label>
                            <textarea class="form-control" rows="4" formControlName="hobbies" [attr.disabled]="bloqueo ? 'disabled': null"></textarea>
                            <p class="error" *ngIf="checkError('hobbies', 'required')">Campo requerido <span>*</span></p>
                        </div>
                        <div class="col-md-12 my-3">
                            <label class="form-label">Personalidad <span class="req">*</span></label>
                            <textarea class="form-control" rows="4" formControlName="personality" [attr.disabled]="bloqueo ? 'disabled': null"></textarea>
                            <p class="error" *ngIf="checkError('personality', 'required')">Campo requerido <span>*</span></p>
                        </div>
                    </div>

                    <div class="mt-3 text-center">
                        <button class="btn btn-green mx-2" type="submit" (click)="onClick()" [disabled]="!formulario.valid">Guardar
                            cambios</button>
                        <button class="btn btn-green mx-2" (click)="onClick()" *ngIf="bloqueo">Editar perfil</button>
                    </div>
                </form>
                <!-- VIAJES COMO ORGANIZADOR -->
                <h2 class="textBlack mt-5 mb-2">Viajes como organizador</h2>
                <!--                <div class="card my-4">
                    <div class="card-body text-center my-5">
                        <h5>Aún no tienes viajes</h5>
                    </div>
                </div> -->
                <div class="card my-4" *ngFor="let trip of tripsOwn">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-auto">
                                <div class="fotoCard">
                                    <img class="img" [src]="serverUrl +'images/' + 
                                     trip.img_trip" alt="">
                                </div>
                            </div>
                            <div class="col">
                                <div class="destination">{{trip.destination}}</div>
                                <div class="textBlack my-2"><i class="fas fa-plane-departure">

                                    </i> {{trip.departure_date | date: 'dd/MM/y'}}</div>
                                <div class="textGreen my-2">EDAD {{trip.min_age}} -
                                    {{trip.max_age}}</div>
                                <div class="price my-2">desde <span class="textGreen">
                                        {{trip.price}}€</span></div>
                            </div>
                            <div class="col text-end">
                                <button [routerLink]="['/trips',trip.id]" class="btn btn-green 
                                 mt-5 me-3">Ver viaje</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- MIS VIAJES -->
                <h2 class="textBlack mt-5 mb-2">Mis viajes</h2>
                <!--                 <div class="card my-4">
                    <div class="card-body text-center my-5">
                        <h5>Aún no tienes viajes</h5>
                    </div>
                </div> -->
                <div class="card my-4" *ngFor="let trip of tripsSubscribed">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-auto">
                                <div class="fotoCard">
                                    <img class="img" [src]="serverUrl +'images/' + 
                                      trip.img_trip" alt="">
                                </div>
                            </div>
                            <div class="col">
                                <div class="destination">{{trip.destination}}</div>
                                <div class="textBlack my-2"><i class="fas fa-plane-departure">

                                    </i> {{trip.departure_date | date: 'dd/MM/y'}}</div>
                                <div class="textGreen my-2">EDAD {{trip.min_age}} -
                                    {{trip.max_age}}</div>
                                <div class="price my-2">desde <span class="textGreen">
                                        {{trip.price}}€</span></div>
                            </div>
                            <div class="col text-end">
                                <button [routerLink]="['/trips',trip.id]" class="btn btn-green 
                                 mt-5 me-3">Ver viaje</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>